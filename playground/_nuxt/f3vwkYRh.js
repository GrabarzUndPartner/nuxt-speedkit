import{u as p}from"./BaIU6u4Z.js";import{ae as f,r as g,af as d,z as o,ag as m,X as S,ah as y,H as C}from"./C9AYlKwB.js";import{b as a,t as v}from"./BCqJmRSL.js";const u=Symbol("criticalContext");function D({critical:i}={}){const t=f(),r=g("critical"in t?t.critical===""||String(t.critical)==="true":i),e=d(u,r.value||!1),n=o(()=>typeof r.value=="boolean"?r.value:e);return m(u,n.value||i),{isCritical:n,critical:e}}function F(){const{booster:i}=S().public;return i}class h{constructor(){this.list=[]}add(t){const r={name:"data-font",value:`${x(JSON.stringify(t.map(e=>e.getKey())))}`};return this.list=[].concat(this.list).concat(t.map(e=>(e.setRootSelector(r),e))),r}getPreloadDescriptions(t,r="anonymous"){return Array.from(this.list.reduce((e,n)=>e,new Map).values())}getStyleDescriptions(t){return l([a(this.list.map(r=>r.getCSSText(t)).join(" "))])}getNoScriptStyleDescriptions(){return l([a(this.list.map(t=>t.getNoScriptCSSText()).join(" "),!0)])}toJSON(){return this.list}}function x(i,t){return v(`${i}_${t}`).padStart(9,"-")}function l(i){return i.filter(t=>t.key!=="0")}function A(i){const{isCritical:t,critical:r}=D(i),e=F(),n=C(),s=y(new h);return b(t,s,e),{isCritical:t,critical:r,$getFont:(...c)=>({runtimeConfig:e,isCritical:t.value,fontCollection:s,definition:n.$booster.getFont(...c)})}}function b(i,t,r){const e={usedFontaine:r.usedFontaine};p({link:o(()=>t.getPreloadDescriptions(i.value)),style:o(()=>t.getStyleDescriptions(e)),noscript:o(()=>t.getNoScriptStyleDescriptions())})}export{A as a,D as u};
