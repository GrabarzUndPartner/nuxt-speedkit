import{u as p}from"./DyuMpRjY.js";import{ae as f,r as g,af as d,z as n,ag as m,X as S,ah as y,H as C}from"./BYoNW82M.js";import{b as a,t as v}from"./BATh4rAy.js";const u=Symbol("criticalContext");function D({critical:i}={}){const t=f(),r=g("critical"in t?t.critical===""||String(t.critical)==="true":i),e=d(u,r.value||!1),o=n(()=>typeof r.value=="boolean"?r.value:e);return m(u,o.value||i),{isCritical:o,critical:e}}function h(){const{booster:i}=S().public;return i}class x{constructor(){this.list=[]}add(t){const r={name:"data-font",value:`${F(JSON.stringify(t.map(e=>e.getKey())))}`};return this.list=[].concat(this.list).concat(t.map(e=>(e.setRootSelector(r),e))),r}getPreloadDescriptions(t,r="anonymous"){return Array.from(this.list.reduce((e,o)=>e,new Map).values())}getStyleDescriptions(t){return l([a(this.list.map(r=>r.getCSSText(t)).join(" "))])}getNoScriptStyleDescriptions(){return l([a(this.list.map(t=>t.getNoScriptCSSText()).join(" "),!0)])}toJSON(){return this.list}}function F(i,t){return v(`${i}_${t}`).padStart(9,"-")}function l(i){return i.filter(t=>t.key!=="0")}function A(i){const{isCritical:t,critical:r}=D(i),e=h(),o=C(),s=y(new x);return b(t,s,e),{isCritical:t,critical:r,$getFont:(...c)=>({runtimeConfig:e,isCritical:t.value,fontCollection:s,definition:o.$booster.getFont(...c)})}}function b(i,t,r){const e={usedFontaine:r.usedFontaine};p({link:n(()=>t.getPreloadDescriptions(i.value)),style:n(()=>t.getStyleDescriptions(e)),noscript:n(()=>t.getNoScriptStyleDescriptions())})}export{A as a,D as u};
