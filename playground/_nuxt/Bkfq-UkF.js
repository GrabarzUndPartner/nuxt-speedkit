const __vite__fileDeps=["./C0CBu_zV.js","./BlM1txk7.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var I=Object.defineProperty;var V=(e,t,a)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var y=(e,t,a)=>(V(e,typeof t!="symbol"?t+"":t,a),a);import{D as $,_ as T,a as j}from"./BlM1txk7.js";import{u as x}from"./Dmvdzgfp.js";import{D as z}from"./BMybiaik.js";import{_ as v}from"./CYPudQmm.js";import{_ as D,r as d,z as g,D as L,E as M,o as c,c as w,x as o,n as m,g as h,a as r,b as O,w as p,l as P,G as A,m as b,A as _,i as N,u as R,p as E,e as q}from"./C0CBu_zV.js";const S=new $,F=()=>({key:"vimeo",src:"https://player.vimeo.com/api/player.js",async:!0,defer:!0,onload:()=>{S.resolve(window.Vimeo)}}),k=()=>S.promise;class G{constructor(){y(this,"api");y(this,"players",[])}play(t){return this.pausePlayers(t),t.play()}pausePlayers(t){return Promise.all(this.players.filter(a=>!t||t&&a!==t).map(async a=>{!await a.getPaused()&&a.pause()}))}async createPlayer(...t){this.api=await k();const a=new this.api.Player(...t);return a.on("playing",()=>this.pausePlayers(a)),this.add(a),a}add(t){this.players.push(t)}remove(t){this.players=this.players.filter(a=>a!==t),t.destroy()}}const f=new G,H={components:{BoosterPicture:v,DefaultButton:z},props:{autoplay:{type:Boolean,default:!1},mute:{type:Boolean,default:void 0},url:{type:String,required:!0},title:{type:String,required:!1,default:null},options:{type:Object,default(){return{}}},posterSizes:{type:Object,default(){return{default:"100vw",xxs:"100vw",xs:"100vw",sm:"100vw",md:"100vw",lg:"100vw",xl:"100vw",xxl:"100vw"}}},posterDensities:{type:[String,Number],default:void 0}},emits:["playing","ready"],async setup(e){const t=d([]);x({script:g(()=>t.value)});const{withQuery:a}=await T(()=>import("./C0CBu_zV.js").then(l=>l.ai),__vite__mapDeps([0,1]),import.meta.url),s=d(null),i=d(!1),n=d(null),u=g(()=>{var l;return((l=s.value)==null?void 0:l.html.replace(/.*src="([^"]*)".*/,"$1").replace(/&amp;/g,"&"))||`https://player.vimeo.com/video/${e.videoId}`});try{const l=a("https://vimeo.com/api/oembed.json",{url:e.url,width:1920,height:1080,...e.playerOptions}),B=await fetch(l);s.value=await B.json()}catch(l){console.error(l),i.value=!0,n.value=u.value}return{playerSrc:u,videoId:new URL(e.url).pathname.replace("/",""),iframeMode:i,src:n,script:t,videoData:s}},data(){return{inert:!1,player:null,ready:!1,loading:!1,playing:!1,isTouchDevice:j()}},computed:{playerTitle(){return this.title||this.videoData&&this.videoData.title},playerOptions(){return{dnt:!0,autopause:!1,...this.options,playsinline:!0,autoplay:this.autoplay,muted:this.isTouchDevice||this.mute}},pictureComponent(){return this.videoData?v:"picture"},poster(){var e;return this.videoData?{formats:this.$booster.targetFormats,title:this.playerTitle,sources:[{format:"jpg",src:this.videoData&&((e=this.videoData.thumbnail_url)==null?void 0:e.replace("https://i.vimeocdn.com","vimeo")),sizes:this.posterSizes,media:"all",densities:this.posterDensities}]}:null}},watch:{videoData(e){e&&this.autoplay&&this.onInit()},ready(){this.inert=!1}},mounted(){this.inert=!0},unmounted(){this.player&&f.remove(this.player)},methods:{onInit(){this.loading=!0,this.src=this.playerSrc,this.script=[F()],this.iframeMode&&(this.$refs.player.src=String(this.$refs.player.src))},onPlayerStateChange(e){e.playing?this.playing=!0:(e.ended||e.pause)&&(this.playing=!1),this.$emit("playing",this.playing)},async onLoad(e){!e.target.src||!this.script.length||(await k(),this.player=L(await f.createPlayer(this.$refs.player)),this.player.on("playing",()=>this.onPlayerStateChange({playing:!0})),this.player.on("pause",()=>this.onPlayerStateChange({pause:!0})),this.player.on("ended",()=>this.onPlayerStateChange({ended:!0})),await this.player.ready(),f.play(this.player),this.loading=!1,this.ready=!0,this.$emit("ready",{iframe:this.player.element,player:this.player}))}}},Q={class:"player"},U=["inert","title","src"];function Y(e,t,a,s,i,n){const u=M("default-button");return c(),w("div",{class:N({ready:i.ready,playing:i.playing,"iframe-mode":s.iframeMode})},[o(e.$slots,"background",m(h({playing:i.playing,videoData:s.videoData})),void 0,!0),r("div",Q,[o(e.$slots,"beforePlayer",{},void 0,!0),(c(),w("iframe",{ref:"player",key:s.src,inert:i.inert,title:n.playerTitle,src:s.src,frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture",onLoad:t[0]||(t[0]=(...l)=>n.onLoad&&n.onLoad(...l))},null,40,U)),O(u,{"aria-label":"Play Video",onClick:n.onInit},{default:p(()=>[(c(),P(A(n.pictureComponent),b({class:"poster"},n.poster),null,16)),i.loading?o(e.$slots,"loading-spinner",{key:0},void 0,!0):_("",!0),!i.ready&&!i.loading?o(e.$slots,"play",{key:1},void 0,!0):_("",!0)]),_:3},8,["onClick"]),o(e.$slots,"afterPlayer",{},void 0,!0)]),o(e.$slots,"default",m(h({playing:i.playing,videoData:s.videoData})),void 0,!0)],2)}const J=D(H,[["render",Y],["__scopeId","data-v-1a798de3"]]),C=e=>(E("data-v-c84f3724"),e=e(),q(),e),K=C(()=>r("div",{class:"loading-spinner"},[r("svg",{viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:"#fff"},[r("g",{fill:"none","fill-rule":"evenodd"},[r("g",{transform:"translate(1 1)","stroke-width":"2"},[r("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),r("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[r("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])])])],-1)),W=C(()=>r("div",{class:"play"},[r("span",null,[r("svg",{viewBox:"0 0 20 20",preserveAspectRatio:"xMidYMid",focusable:"false"},[r("polygon",{class:"fill",points:"1,0 20,10 1,20"})])])],-1)),X=Object.assign({inheritAttrs:!1},{__name:"BoosterVimeo",setup(e){return(t,a)=>(c(),P(R(J),b({class:"nuxt-booster-vimeo"},t.$attrs),{beforePlayer:p(()=>[o(t.$slots,"beforePlayer",{},void 0,!0)]),"loading-spinner":p(()=>[o(t.$slots,"loading-spinner",{},()=>[K],!0)]),play:p(()=>[o(t.$slots,"play",{},()=>[W],!0)]),default:p(s=>[o(t.$slots,"default",m(h(s)),void 0,!0)]),afterPlayer:p(()=>[o(t.$slots,"afterPlayer",{},void 0,!0)]),_:3},16))}}),ie=D(X,[["__scopeId","data-v-c84f3724"]]);export{ie as D};
