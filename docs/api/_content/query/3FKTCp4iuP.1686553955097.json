{"_path":"/v3/guide/caveats","_dir":"guide","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"Caveats","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":""},"children":[{"type":"element","tag":"binding","props":{"value":"title"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"prevent-speedindex_of_zero-and-no_lcp"},"children":[{"type":"text","value":"Prevent "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SPEEDINDEX_OF_ZERO"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NO_LCP"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"window"}]},{"type":"text","value":" event "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-speedkit:run"}]},{"type":"text","value":" is provided and useable to run code outside the app during initialization."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the performance is not sufficient on the client side, this can be retrieved with the help of the event object "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"e.detail.sufficient"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h3","props":{"id":"example"},"children":[{"type":"text","value":"Example"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A case where the event may be needed would be when the initial viewport on a website is blank and it is not displayed until the initialization is complete."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this case, measurements with Lighthouse can lead to these errors "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"SPEEDINDEX_OF_ZERO"}]},{"type":"text","value":" and "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"NO_LCP"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In order to solve this case, it can be provided that the content of the stage can already be displayed outside of the app initialization in the case of a slow initialization."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this case the global event "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"nuxt-speedkit:run"}]},{"type":"text","value":" can be used. It will return an event object with "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"e.detail.sufficient"}]},{"type":"text","value":" as value. With the help of this status you can decide whether the stage should be displayed in advance."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Component Example"}]}]},{"type":"element","tag":"code","props":{"code":"<template>\n  <div class=\"stage\">…</div>\n</template>\n\n<script setup>\n\n  useHead({\n    script: [\n      {\n        key: 'prevent-script',\n        children: `\n          window.addEventListener(\"nuxt-speedkit:run\", function (e) {\n            if (!e.detail.sufficient) {\n              // added style class to display the content\n              document.querySelector('.stage').classList.add('visible')\n            }\n          });\n        `\n      }\n    ]\n  })\n\n</script>\n","language":"html","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-bf8e06"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"  <"}]},{"type":"element","tag":"span","props":{"class":"ct-bf8e06"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c26cf5"},"children":[{"type":"text","value":"class"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"\"stage\""}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":">…</"}]},{"type":"element","tag":"span","props":{"class":"ct-bf8e06"},"children":[{"type":"text","value":"div"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-bf8e06"},"children":[{"type":"text","value":"template"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-bf8e06"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c26cf5"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-4ffc0b"},"children":[{"type":"text","value":"useHead"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"    script: [\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":9},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"      {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":10},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"        key: "}]},{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"'prevent-script'"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":",\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":11},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"        children: "}]},{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"`\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":12},"children":[{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"          window.addEventListener(\"nuxt-speedkit:run\", function (e) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":13},"children":[{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"            if (!e.detail.sufficient) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":14},"children":[{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"              // added style class to display the content\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":15},"children":[{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"              document.querySelector('.stage').classList.add('visible')\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":16},"children":[{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"            }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":17},"children":[{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"          });\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":18},"children":[{"type":"element","tag":"span","props":{"class":"ct-67fac4"},"children":[{"type":"text","value":"        `\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":19},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"      }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":20},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"    ]\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":21},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"  })\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":22},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":23},"children":[{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-bf8e06"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-f81992"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-4ffc0b{color:#8250DF}\n.ct-67fac4{color:#0A3069}\n.ct-c26cf5{color:#0550AE}\n.ct-bf8e06{color:#116329}\n.ct-f81992{color:#24292F}\n.dark .ct-f81992{color:#C9D1D9}\n.dark .ct-bf8e06{color:#7EE787}\n.dark .ct-c26cf5{color:#79C0FF}\n.dark .ct-67fac4{color:#A5D6FF}\n.dark .ct-4ffc0b{color:#D2A8FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"prevent-speedindex_of_zero-and-no_lcp","depth":2,"text":"Prevent SPEEDINDEX_OF_ZERO and NO_LCP","children":[{"id":"example","depth":3,"text":"Example"}]}]}},"_type":"markdown","_id":"content:11.v3:3.guide:3.caveats.md","_source":"content","_file":"11.v3/3.guide/3.caveats.md","_extension":"md"}